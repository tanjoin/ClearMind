package in.tanjo.clearmind.stopwatch;import android.os.Bundle;import android.util.Log;import android.view.Menu;import android.view.MenuInflater;import android.view.MenuItem;import android.view.MotionEvent;import android.view.View;import android.view.View.OnTouchListener;import android.view.WindowManager;import in.tanjo.clearmind.BaseActivity;import in.tanjo.clearmind.R;import java.util.ArrayList;public class StopWatchActivity extends BaseActivity implements OnTouchListener {    private View mStopWatchView = null;    private Long mPreviousTime  = null;    private ArrayList<Long> mTimeRap = new ArrayList<Long>();    private WindowManager mWindowManager = null;    private View mOverlayView = null;    private StopWatchActivity() {        super();    }    @Override    protected void onCreate(final Bundle savedInstanceState) {        super.onCreate(savedInstanceState);        setContentView(R.layout.stop_watch_activity);        initViews();        bindViews();    }    @Override    protected void onStart() {        super.onStart();//        LayoutInflater layoutInflater = LayoutInflater.from(this);//        WindowManager.LayoutParams params = new WindowManager.LayoutParams(//                WindowManager.LayoutParams.WRAP_CONTENT,//                WindowManager.LayoutParams.WRAP_CONTENT,//                WindowManager.LayoutParams.TYPE_SYSTEM_OVERLAY,//                WindowManager.LayoutParams.FLAG_WATCH_OUTSIDE_TOUCH,//                PixelFormat.TRANSLUCENT);//        mWindowManager = (WindowManager) getSystemService(Context.WINDOW_SERVICE);//        mOverlayView = layoutInflater.inflate(R.layout.stop_watch_activity, null);//        mWindowManager.addView(mOverlayView, params);    }    @Override    protected void onDestroy() {        super.onDestroy();//        mWindowManager.removeView(mOverlayView);    }    private void initViews() {        mStopWatchView = findViewById(R.id.stop_watch_activity_view);        mStopWatchView.setEnabled(true);        mStopWatchView.setClickable(true);    }    private void bindViews() {        mStopWatchView.setOnTouchListener(this);    }    @Override    public boolean onPrepareOptionsMenu(final Menu menu) {        menu.clear();        boolean ret = super.onCreateOptionsMenu(menu);        MenuInflater inflater = getMenuInflater();        inflater.inflate(R.menu.stop_watch_activity_menu, menu);        for (int i = 0; i < mTimeRap.size(); i++) {          menu.add(0, Menu.FIRST + 2 + i, Menu.NONE, "#" + i + ": "+ mTimeRap.get(i).toString() + "ns");        }        return ret;    }    @Override    public boolean onOptionsItemSelected(final MenuItem item) {        super.onOptionsItemSelected(item);        switch (item.getItemId()) {        case R.id.stop_watch_menu_001:            finish();            return true;        case R.id.stop_watch_menu_002:            mTimeRap.clear();            return true;        }        return false;    }    @Override    public boolean onTouch(final View v, final MotionEvent event) {        int action = event.getAction();        switch (action) {        case MotionEvent.ACTION_DOWN:            Log.i("ClearMind", "ACTION_DOWN");            mPreviousTime = System.nanoTime();            return true;        case MotionEvent.ACTION_UP:            Log.i("ClearMind", "ACTION_UP");            Long time = System.nanoTime() - mPreviousTime;            Log.i("ClearMind", time.toString());            mTimeRap.add(time);            return true;        default:            return false;        }    }}